# Ejecutar lint-staged
npx lint-staged

# Ejecutar build:dev
echo "Ejecutando build:dev..."
npm run build:dev

# Si el build falla, detener el commit
if [ $? -ne 0 ]; then
  echo "Build fallÃ³. Commit cancelado."
  exit 1
fi

# Si el build es exitoso, eliminar las carpetas build y dist si existen
echo "Build exitoso. Limpiando carpetas build y dist..."

# Eliminar build
if [ -d "build" ]; then
  rm -rf build 2>/dev/null || rmdir /s /q build 2>/dev/null || echo "No se pudo eliminar build"
fi

# Eliminar dist
if [ -d "dist" ]; then
  rm -rf dist 2>/dev/null || rmdir /s /q dist 2>/dev/null || echo "No se pudo eliminar dist"
fi

echo "Pre-commit completado exitosamente."